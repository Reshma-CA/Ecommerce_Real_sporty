{% extends 'layouts/main.html'%}

{% load static %}

{% block content %}
<br><br><br><br><br><br>



  


  
    
            {% comment %} ######################################################### {% endcomment %}

            <div class="row mt-4 ml-1">

              <div class=" ">
                <div class="mt-3">
                   <label class="block1-name ltext-102 trans-04 p-b-8" for="">Addresses</label> 
                </div>
                 
                   <div>
                    {% if addressobjs %}
                   <ol>
                       {% for addressobj in addressobjs  %}
                       <li class="ml-5">
                           {{addressobj.house}} , {{addressobj.locality}} , {{addressobj.district}}
                            <div>{{addressobj.state}} , {{addressobj.country}}</div>
                            <div>Pincode : {{addressobj.pincode}}</div>
                            
                       </li>
                       
   
                       <button class="flex-c-m stext-101 cl0 size-103 bg1 bor1 hov-btn2 p-lr-15 trans-04  mt-3"  data-bs-toggle="modal" data-bs-target="#editaddress-{{forloop.counter}}" > Edit Address</button>
                       <hr>
                       {% endfor %}
                   </ol>
                   {% else %}
                   <br><br>
                   <h4 class="block1-name ltext-10 trans-04 p-b-8 text-danger">Address not added!</h4>

                   {% endif %}
   
                   
   
       
                   </div>
                   <button style="margin-left:190px;" id="addaddress" class="flex-c-m stext-101 cl0 btn bg1  hov-btn2 p-lr-15 trans-04  mt-5 text-center"  >&#43; Add New Address </button>
   
                   {% comment %} <button class="btn btn-warning mt-3"  data-bs-toggle="modal" data-bs-target="#editaddress-{{forloop.counter}}" > Edit Address</button> {% endcomment %}
           </div>



            </div>
              
        </div>

        

        {% comment %} Edit User Details Modal {% endcomment %}

        <div class="modal fade mt-5" id="editdata-{{forloop.counter}}" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
          <br><br><br>
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="editModalLabel">Edit User Details</h5>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <!-- Your form elements go here -->
                  <form action= "{% url 'edituserdetails' %}" method="POST"> {% csrf_token %}
                    
                    {% comment %}  {% endcomment %}
                    <label for="name">Name</label>
                    <input value={{customerobj.name}} type="text" id="name" name="name" placeholder="Enter your name" required>
          
                    <label for="email">Email</label>
                    <input value={{customerobj.email}} type="email" id="email" name="email" placeholder="Enter your email" required>

                    <label for="">Phonenumber</label>
                    <input value={{customerobj.phonenumber}} type="number" id="email" name="phonenumber" placeholder="Enter your phonumber" required>
                    <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="flex-c-m stext-101 cl0 size-103 bg1 bor1 hov-btn2 p-lr-15 trans-04">Save Changes</button>
                    </div>
                  </form>
                </div>
                
                  
                
              </div>
            </div>
          </div>


          {% comment %} Add address Modal {% endcomment %}
          <div class="modal mt-5" id="addaddress_modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
              <div class="modal-content mt-5">
                <div class="modal-header">
                  <h5 class="modal-title">Add Address</h5>
                  <button type="button" class="closeit close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <!-- Address form -->
                  
                 
                    <div class="form-group">
                      <label for="housename">House Name:</label>
                      <input type="text" class="form-control" id="housename" name="housename" placeholder="Enter house name" Required>
                      <span class="text-danger" id="error_housename"></span>
                    </div>
                    <div class="form-group">
                      <label for="country">Country:</label>
                      <input type="text" class="form-control" id="countryname" name="countryname" placeholder="Enter country" Required>
                      <span class="text-danger" id="error_countryname"></span>
                    </div>
                    <div class="form-group">
                      <label for="state">State:</label>
                      <input type="text" class="form-control" id="statename" name="statename" placeholder="Enter state" Required>
                      <span class="text-danger" id="error_statename"></span>
                    </div>
                    <div class="form-group">
                      <label for="district">District:</label>
                      <input type="text" class="form-control" id="districtname" name="districtname" placeholder="Enter district" Required>
                      <span class="text-danger" id="error_districtname"></span>
                    </div>
                    <div class="form-group">
                      <label for="locality">Locality:</label>
                      <input type="text" class="form-control" id="localityname" name="localityname" placeholder="Enter locality" Required>
                      <span class="text-danger" id="error_localityname"></span>
                    </div>
                    <div class="form-group">
                      <label for="pincode">Pincode:</label>
                      <input type="text" class="form-control" id="pincodename" name="pincodename" placeholder="Enter pincode" Required>
                      <span class="text-danger" id="error_pincodename"></span>
                    </div>
                    <div class="modal-footer">
                      <button  class="btn btn-danger closeit" id="">Close</button>
                    <button  class="flex-c-m stext-101 cl0 size-103 bg1 bor1 hov-btn2 p-lr-15 trans-04" id="submitaddress">Save Address</button>

                    </div>
            
                    
                    
                 
                </div>
              </div>
            </div>
          </div>







        <div class="col-md-8 border border-1">

            <div class="container">
                
                <div class="row">
                  <span class="block1-name ltext-102 trans-04 p-b-8 mt-3">
                      Orders
                  </span>
                  <div class="row mt-5"></div>
                  <div class="row mt-5"></div>
              </div>

              <hr>
              {% if ordernumberobjs %}
              <div class="row">
                  <table class="table table-hover">
                      <thead>
                        <tr>
                          <th>Sl No</th>
                          <th>Total Price</th>
                          <th>Coupon</th>
                          <th>Order Date</th>
                          <th></th>

                      
                          
                        </tr>
                      </thead>
                      <tbody>
                        {% for item in ordernumberobjs %}
                 
                       

                          <tr onclick="window.location.href='{% url 'orderdetails' item.id %}'">
                            <td>{{ item.slno }}</td>
                            <td>{{ item.totalamount }}</td>
                            {% if item.coupon.code %}
                            <td class="text-success">{{ item.coupon.code }} Coupon Applied &#x2713; </td>
                            {% else %}
                            <td class="text-danger">No Coupon</td>  
                            {% endif %}
                            <td>{{ item.ordertime }}</td>
                            <td><a style="color:#717fe0;" class=""  href={% url 'orderdetails'  item.id  %}> View details <i class="fas fa-angle-double-right"></i>




                            </a></td>
                          </tr>
                       
                       
                        
                          
                          
                        {% endfor %}
                      </tbody>
                    </table>
                  
          
              </div>
              {% else %}
              <span class="block1-name ltext-101 trans-04 p-b-8 mt-3 text-danger">
                No Orders Yet!
            </span>
              {% endif %}
            

               
                
            </div>


            
               
            
            
            
            
            
            
            
            {% comment %} <div class="row mt-5"></div>
            <div class="row mt-5"></div>
            <div class="row mt-5"></div>
            <div class="row mt-5"></div> {% endcomment %}
            
            
            
            
            


        </div>





    </div>
  </br>

    
</div> 

{% comment %} Edit Address Modal {% endcomment %}
{% for addressobj  in addressobjs  %}
<div class="modal fade mt-5" id="editaddress-{{forloop.counter}}" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="editModalLabel">Edit User Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <!-- Your form elements go here -->
        <form action="{% url 'edituseraddress' addressobj.id %}"  method="POST"> {% csrf_token %}
          

          <label for="name">House</label>
          <input value={{addressobj.house}} type="text" id="name" name="house" placeholder="Enter your name" required>

          <label for="email">Locality</label>
          <input value={{addressobj.locality}} type="text" id="email" name="locality" placeholder="Enter your email" required>

          <label for="">District</label>
          <input value={{addressobj.district}} type="text" id="email" name="district" placeholder="Enter your phonumber" required>

          <label for="">State</label>
          <input value={{addressobj.state}} type="text" id="email" name="state" placeholder="Enter your phonumber" required>

          <label for="">Country</label>
          <input value={{addressobj.country}} type="text" id="email" name="country" placeholder="Enter your phonumber" required>

          <label for="">Pin Code</label>
          <input value={{addressobj.pincode}} type="number" id="email" name="pincode" placeholder="Enter your phonumber" required>
          <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="flex-c-m stext-101 cl0 size-103 bg1 bor1 hov-btn2 p-lr-15 trans-04">Save Changes</button>
          </div>
        </form>
      </div>
      
        
      
    </div>
  </div>
  </div>

  {% endfor %}




  {% comment %} CANCEL MODAL {% endcomment %}
 
  <div style="margin-top:100px;" class="modal fade" id="cancelModal" tabindex="-1" role="dialog" aria-labelledby="cancelModalLabel" aria-hidden="true">
 
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="cancelModalLabel">Confirm Order Cancellation</h5>
          <button type="button" class="close closeit" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Are you sure you want to cancel this order?</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary closeit" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-danger closeit" data-dismiss="modal" id="confirmcancel">Cancel Order</button>
        </div>
      </div>
    </div>
  </div>



  <div style="margin-top:100px;" class="modal fade" id="walletmodal" tabindex="-1" role="dialog" aria-labelledby="cancelModalLabel" aria-hidden="true">
 
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="cancelModalLabel">Order Cancelled</h5>
          
            {% comment %} <span aria-hidden="true">&times;</span> {% endcomment %}
          </button>
        </div>
        <div class="modal-body p-5">
          <p > <h5 style="color:green;"> Amount is added to your wallet &#x2713; </h5></p>
        </div>
        {% comment %} <div class="modal-footer">
          <button type="button" class="btn btn-secondary closeit" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-danger closeit" data-dismiss="modal" id="confirmcancel">Cancel Order</button>
        </div> {% endcomment %}
      </div>
    </div>
  </div>


  <div style="margin-top:100px;" class="modal fade" id="addressconfirmmodal" tabindex="-1" role="dialog" aria-labelledby="cancelModalLabel" aria-hidden="true">
 
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="cancelModalLabel">Address Added</h5>
          
            {% comment %} <span aria-hidden="true">&times;</span> {% endcomment %}
          </button>
        </div>
        <div class="modal-body p-5">
          <p > <h5 style="color:green;"> New address is added &#x2713; </h5></p>
        </div>
        {% comment %} <div class="modal-footer">
          <button type="button" class="btn btn-secondary closeit" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-danger closeit" data-dismiss="modal" id="confirmcancel">Cancel Order</button>
        </div> {% endcomment %}
      </div>
    </div>
  </div>

<br><br><br><br><br><br>










{% endblock content %}